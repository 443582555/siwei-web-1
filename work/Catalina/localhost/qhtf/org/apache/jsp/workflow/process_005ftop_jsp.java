/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.75
 * Generated at: 2017-03-24 05:45:36 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.workflow;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import java.util.*;
import com.aegon_cnooc.oa.ibatis.to.TuOafWfprcsTO;
import com.aegon_cnooc.oa.ibatis.to.TuOafWfiTaskTO;
import com.aegon_cnooc.oa.ibatis.to.TuOafWfiProcTO;
import com.aegon_cnooc.oa.ibatis.to.TuOafUsersTO;
import com.aegon_cnooc.oa.constants.Constants;
import com.aegon_cnooc.util.StringUtil;

public final class process_005ftop_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html;charset=gbk");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");

String path = request.getContextPath();

      out.write("\r\n");
      out.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n");
      out.write("<html xmlns=\"http://www.w3.org/1999/xhtml\">\r\n");
      out.write("<head>\r\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=gb2312\" />\r\n");
      out.write("<title></title>\r\n");
      out.write("<link href=\"");
      out.print(path );
      out.write("/css/reset.css\" rel=\"stylesheet\" type=\"text/css\" />\r\n");
      out.write("<link href=\"");
      out.print(path );
      out.write("/css/styles.css\" rel=\"stylesheet\" type=\"text/css\" />\r\n");
      out.write("<script src=\"");
      out.print(path );
      out.write("/js/jquery.js\" type=\"text/javascript\"></script>\r\n");
      out.write("<script src=\"");
      out.print(path );
      out.write("/js/menu_select.js\" type=\"text/javascript\"></script>\r\n");

	TuOafUsersTO user = (TuOafUsersTO) session.getAttribute(Constants.GLOBAL_SESSION_USER);
	String wfid = (String)request.getAttribute("wfid");
	String nodeid = (String)request.getAttribute("nodeid");
	String taskid = (String)request.getAttribute("taskid");
	String type = (String)request.getAttribute("type");
	String flag = (String)request.getAttribute("flag");
	Map wfmap = (Map)request.getAttribute("wfmap");
	Map map = (Map)request.getAttribute("map");
	TuOafWfiProcTO procTO = (TuOafWfiProcTO)request.getAttribute("proc");
	if(procTO==null){
		procTO = new TuOafWfiProcTO();
	}
	if(map==null){
		map = new HashMap();		
	}
	String parent_taskid = (String)map.get("parent_taskid");
	String back_flag = (String)map.get("back_flag");
	TuOafWfiTaskTO task;
	if(map==null){
		map = new HashMap();
	}else{
		task =(TuOafWfiTaskTO) map.get("task");
		if(task==null){
			task = new TuOafWfiTaskTO();
		}
	}
	String status = (String)map.get("status");
	String style = "";
	String disabled = "";
	String comments = "";
	if("2".equals(status)){
		style = "style=\"background-color:#FF6677;\"";
		disabled = "disabled";
		if(!StringUtil.isEmpty(parent_taskid)){
			comments = ":<font color='red'>本流程被挂起</font><a href='#'>查看</a>";
		}else{
			comments = ":<font color='red'>本流程被挂起</font><a href='#'>查看</a>";
		}
	}
	List userList = (List)request.getAttribute("userList");
	
	int num = Integer.parseInt(request.getAttribute("num").toString());
 
      out.write("\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("\tfunction process(action){\r\n");
      out.write("\t\t//alert(action);\r\n");
      out.write("\t\tif(action==\"Reject\"){\r\n");
      out.write("\t\t\tif(!confirm(\"选择Reject将关闭此流程，确定吗？\")){\r\n");
      out.write("\t\t\t\treturn;\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\ttry{\r\n");
      out.write("\t\t\t//alert(action);\r\n");
      out.write("\t\t\tvar Comments = document.forms[0].Comments.value;\r\n");
      out.write("\t\t\t//如果必须录入备注，则提示用户：TODO\r\n");
      out.write("\t\t\tif(Comments!=\"\"){\r\n");
      out.write("\t\t\t  Comments += '--add comments by ");
      out.print(user.getUser_name());
      out.write("';\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t\t//debugger;\r\n");
      out.write("\t\t\t//debugger;\r\n");
      out.write("\t\t\tvar result = window.parent.bottomFrame.submitForm(action,Comments);\r\n");
      out.write("\t\t}catch(e){\r\n");
      out.write("\t\t    //alert(e);\r\n");
      out.write("\t\t\talert(\"页面加载中，请稍后再试\");\r\n");
      out.write("\t\t\treturn;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tif(result){\r\n");
      out.write("\t\t\t//将录入框都灰掉\r\n");
      out.write("\t\t\tfor(i=0;i<document.all.length;i++){\r\n");
      out.write("\t\t\t\tif(document.all[i].tagName==\"INPUT\"||\r\n");
      out.write("\t\t\t\tdocument.all[i].tagName==\"SELECT\"||\r\n");
      out.write("\t\t\t\tdocument.all[i].tagName==\"TEXTAREA\"\r\n");
      out.write("\t\t\t\t){\r\n");
      out.write("\t\t\t\t\tdocument.all[i].disabled=true;\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\t\r\n");
      out.write("\t\t");

          	List procList = (List)request.getAttribute("procList");
          	for(int i=0;i<procList.size();i++){
          	TuOafWfprcsTO proc = (TuOafWfprcsTO)procList.get(i);
        
      out.write("\r\n");
      out.write("       \t//document.forms[0].btn");
      out.print(proc.getPrcid());
      out.write(".disabled=\"disabled\";\r\n");
      out.write("        ");
} 
      out.write("\r\n");
      out.write("\t\t//document.forms[0].forward.disabled=\"disabled\";\r\n");
      out.write("\t\t//document.forms[0].back.disabled=\"disabled\";\r\n");
      out.write("\t}\r\n");
      out.write("\t//指派任务给其他人处理\r\n");
      out.write("\tfunction forwardTask(){\r\n");
      out.write("\t\tvar forward_userid = document.forms[0].forward_userid.value;\r\n");
      out.write("\t\tif(forward_userid==\"\"){\r\n");
      out.write("\t\t\talert(\"请选择一个指派的人\");\r\n");
      out.write("\t\t\tdocument.forms[0].forward_userid.focus();\r\n");
      out.write("\t\t\treturn ;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tif(confirm(\"指派表示您将当前的【");
      out.print(wfmap.get("genstepname") );
      out.write("】任务转交给其他人处理，但流程仍停留在当前环节，确认执行指派吗？\")==false){\r\n");
      out.write("\t\t\treturn;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tdocument.forms[0].action = \"");
      out.print(path);
      out.write("/workflow/forwardTask.do\";\r\n");
      out.write("\t\tdocument.forms[0].submit();\r\n");
      out.write("\t\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\tfunction backTask(){\r\n");
      out.write("\t\tparent.window.location = '");
      out.print(path);
      out.write("/workflow/viewTaskProcess.do?taskid=");
      out.print(taskid);
      out.write("&viewtype=backTask&cur_nodeid=");
      out.print(nodeid);
      out.write("';\r\n");
      out.write("\t}\r\n");
      out.write("\tfunction viewTask(){\r\n");
      out.write("\t\t//window.open('");
      out.print(path);
      out.write("/workflow/viewTaskProcess.do?taskid=");
      out.print(taskid);
      out.write("');\r\n");
      out.write("\t\twindow.open('");
      out.print(path );
      out.write("/workflow/viewTaskProcess.do?taskid=");
      out.print(taskid);
      out.write("','可视化查看流程处理过程', 'height=800, width=1600, top=0, left=0, toolbar=no, menubar=no, scrollbars=yes, resizable=no,location=no, status=no');\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\tfunction closewindow(){\r\n");
      out.write("\t\tif(confirm(\"确认关闭当前页面？\")==true){\r\n");
      out.write("\t\t\twindow.parent.location = \"");
      out.print(path);
      out.write("/frontend/todo.jsp?flag=1&nodeid=-1\";\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\tfunction init(){\r\n");
      out.write("\t    ");
if("CC".equals(flag)){
      out.write("\r\n");
      out.write("\t\t//将录入框都灰掉\r\n");
      out.write("\t\t\tfor(i=0;i<document.all.length;i++){\r\n");
      out.write("\t\t\t\tif(document.all[i].tagName==\"INPUT\"||\r\n");
      out.write("\t\t\t\tdocument.all[i].tagName==\"SELECT\"||\r\n");
      out.write("\t\t\t\tdocument.all[i].tagName==\"TEXTAREA\"\r\n");
      out.write("\t\t\t\t){\r\n");
      out.write("\t\t\t\t    if(document.all[i].value!=\"关闭窗口\"&&document.all[i].value!=\"查看\" &&document.all[i].value!=\"邮件\"){\r\n");
      out.write("\t\t\t\t\t\tdocument.all[i].disabled=true;\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t");
}
      out.write("\t\r\n");
      out.write("\t\tvar wfid = document.forms[0].wfid.value;\r\n");
      out.write("\t\tif(wfid==153){//需求流程\r\n");
      out.write("\t\t\t//根据不同的状态，灰掉相关的按钮\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t//关闭当前子流程，如果所有子流程都走完，则主流程继续执行\r\n");
      out.write("\tfunction closesubflow(){\r\n");
      out.write("\t\t//alert(\"\");\r\n");
      out.write("\t\tif(confirm(\"确认要结束当前子流程吗？\")==true){\r\n");
      out.write("\t\t\tdocument.forms[0].action = \"");
      out.print(path);
      out.write("/workflow/finishSubFlow.do\";\r\n");
      out.write("\t\t\tdocument.forms[0].submit();\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("function CCForm()\r\n");
      out.write("{\r\n");
      out.write("var u = window.parent.location.href; //window.parent.bottomFrame.location.href;\r\n");
      out.write("u = u+\"&user_id=\"+");
      out.print(procTO.getUserid());
      out.write(";\r\n");
      out.write("//alert(u);\r\n");
      out.write("var type = u.substring(u.indexOf('wfid=')+5,u.indexOf('&taskid')); //u.substring(u.indexOf('wfid=')+5,u.indexOf('&type'));\r\n");
      out.write("var Body;\r\n");
      out.write("var Title=\"FW:\";\r\n");
      out.write("if('901'==type){\r\n");
      out.write("\tTitle = \"FW: Defect-prod\";\r\n");
      out.write("}\r\n");
      out.write("if('153'==type){\r\n");
      out.write("\tTitle = \"FW: 用户需求申请\";\r\n");
      out.write("}\r\n");
      out.write("if('145'==type){\r\n");
      out.write("\tTitle = \"FW: 系统上线\";\r\n");
      out.write("}\r\n");
      out.write("if('159'==type){\r\n");
      out.write("\tTitle = \"FW: 数据维护\";\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("Body = \"Please click here to open the form :\"+encodeParam(u);\r\n");
      out.write("window.location.href = \"mailto:?subject=\" + Title + \"&body=\" + Body;\r\n");
      out.write("}\r\n");
      out.write("function encodeParam(param) {\r\n");
      out.write("        return encodeURIComponent(param);\r\n");
      out.write("}\r\n");
      out.write("//+v2.0 add 2013-07-25 suqiang ITMS00047 start\r\n");
      out.write("function alertUserWindow(){\r\n");
      out.write("\tvar iWidth = 900;                          //弹出窗口的宽度;\r\n");
      out.write("    var iHeight = 600;                        //弹出窗口的高度;\r\n");
      out.write("    var iTop = (window.screen.availHeight-30-iHeight)/2;       //获得窗口的垂直位置;\r\n");
      out.write("    var iLeft = (window.screen.availWidth-10-iWidth)/2;           //获得窗口的水平位置;\r\n");
      out.write("    window.open(\"");
      out.print(path);
      out.write("/workflow/page_user_list.jsp?type=init\",\"用户查询\",\"top=\"+iTop+\",left=\"+iLeft+\",height=\"+iHeight+\", width=\"+iWidth+\",toolbar=no, menubar=no, scrollbars=yes, resizable=no,location=no, status=no\");\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("\tfunction setForward(forward_id,forward_name){\r\n");
      out.write("\t\tvar slt = document.getElementById('forward_userid');\r\n");
      out.write("\t\tfor(var i = 0;i<slt.options.length;i++){\r\n");
      out.write("\t\t\tif(slt.options[i].value == forward_id){\r\n");
      out.write("\t\t\t\tslt.options[i].selected=true;\r\n");
      out.write("\t\t\t\tbreak;\r\n");
      out.write("\t\t\t} \r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("//+v2.0 add 2013-07-25 suqiang ITMS00047 end\r\n");
      out.write("</script>\r\n");
      out.write("<style type=\"text/css\">\r\n");
      out.write("<!--\r\n");
      out.write("body{\r\n");
      out.write("\tcolor: ");
if(!StringUtil.isEmpty(parent_taskid)){
      out.write("#FF6677");
}else{
      out.write("#E4F4FD");
}
      out.write("; \r\n");
      out.write("\tfont: 14px 黑体,Verdana, Arial, Helvetica, sans-serif; \r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("td { \r\n");
      out.write("    border-right: 0px solid #C1DAD7; \r\n");
      out.write("    border-bottom: 0px solid #C1DAD7; \r\n");
      out.write("    background: ");
if(!StringUtil.isEmpty(parent_taskid)){
      out.write("#FFFFCC");
}else{
      out.write("#E4F4FD");
}
      out.write("; \r\n");
      out.write("    font-size:11px; \r\n");
      out.write("    padding: 6px 6px 6px 12px; \r\n");
      out.write("    color: #4f6b72; \r\n");
      out.write("} \r\n");
      out.write("-->\r\n");
      out.write("</style>\r\n");
      out.write("</head>\r\n");
      out.write("\r\n");
      out.write("<body onload=\"init()\">\r\n");
      out.write("<form method=\"post\">\r\n");
      out.write("\t<input type=\"hidden\" name=\"wfid\" value=\"");
      out.print(wfid );
      out.write("\"/>\r\n");
      out.write("\t<input type=\"hidden\" name=\"nodeid\" value=\"");
      out.print(nodeid );
      out.write("\"/>\r\n");
      out.write("\t<input type=\"hidden\" name=\"taskid\" value=\"");
      out.print(taskid );
      out.write("\"/>\r\n");
      out.write("\t<input type=\"hidden\" name=\"type\" value=\"");
      out.print(type );
      out.write("\"/>\t\r\n");
      out.write("<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\r\n");
      out.write("\t<tr>\r\n");
      out.write("\t\t<td colspan=\"3\">当前所在的节点是：<font color=blue>");
      out.print(StringUtil.getNulToBlank(wfmap.get("genstepname")) );
      out.write('(');
      out.print(StringUtil.getNulToBlank(nodeid) );
      out.write(")</font> of [");
      out.print(wfmap.get("wfcatname") );
      out.write("]组/[");
      out.print(wfmap.get("wfname") );
      out.write(']');
if(!StringUtil.isEmpty(parent_taskid)){
      out.write("<font color=red>子流程</font>");
}else{
      out.write('流');
      out.write('程');
}
      out.write("</td>\r\n");
      out.write("\t</tr>\r\n");
      out.write("\t<tr>\r\n");
      out.write("\t\t<td width=\"20%\">\r\n");
      out.write("\t\t\t");

          	for(int i=0;i<procList.size();i++){
          	TuOafWfprcsTO proc = (TuOafWfprcsTO)procList.get(i);
          	 
      out.write("\r\n");
      out.write("          \t<input type=\"button\" ");
      out.print(style );
      out.write(' ');
      out.print(disabled );
      out.write(" name=\"btn");
      out.print(proc.getPrcid());
      out.write("\" value=\"");
      out.print(proc.getPrcname());
      out.write("\" onclick=\"process('");
      out.print(proc.getPrcname());
      out.write("')\"/>\r\n");
      out.write("          \t");
} 
      out.write("\r\n");
      out.write("          \t<!-- <input type=\"button\" name=\"finishsubflow\" value=\"FinishSubflow\" onclick=\"closesubflow()\"/>\r\n");
      out.write("          \t -->\r\n");
      out.write("\t\t</td>\r\n");
      out.write("\t\t<td width=\"50%\">&nbsp;\r\n");
      out.write("\t\t   <!--\r\n");
      out.write("\t\t\t<a href=\"#\" onclick=\"window.open('");
      out.print(path );
      out.write("/formconfig/initFormConfig.do')\">表单配置</a><br/>\r\n");
      out.write("\t\t\t<a href=\"#\" onclick=\"window.open('");
      out.print(path );
      out.write("/formconfig/initFormGroupConfig.do')\">表单权限配置</a><br/></td>\r\n");
      out.write("\t\t -->\r\n");
      out.write("\t\t <font color='red'>");
if("Y".equals(back_flag)){ 
      out.write("<img src=\"");
      out.print(path );
      out.write("/workflow/editors/images/warning.gif\"/>提示信息：本节点是退回节点");
} 
      out.write("\r\n");
      out.write("\t\t ");
if(!StringUtil.isEmpty(procTO.getProcnote())){ 
      out.write("\r\n");
      out.write("\t\t ");
if(num>0){ //判断是否有退回信息 
      out.write("\r\n");
      out.write("\t\t \t<img src=\"");
      out.print(path );
      out.write("/workflow/editors/images/warning.gif\"/>提示信息：\r\n");
      out.write("\t\t \t");
}
      out.write("\r\n");
      out.write("\t\t \t");
}
      out.write("\r\n");
      out.write("\t\t \t");
if(num>0){ 
      out.write("\r\n");
      out.write("\t\t \t");
      out.print(StringUtil.getNulToBlank(procTO.getProcnote()) );
      out.write("\r\n");
      out.write("\t\t \t<a href='#' onclick=\"window.open('");
      out.print(path );
      out.write("/workflow/view_task_notes.jsp?taskid=");
      out.print(taskid );
      out.write("','查看沟通记录', 'height=800, width=1600, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no')\" >\r\n");
      out.write("\t\t \tmore comments...</a>\r\n");
      out.write("\t\t \t");
}
      out.write("\r\n");
      out.write("\t\t \t</font>\r\n");
      out.write("\t\t<!-- v2.0+ add by liuxinghui 20120229  --> \t\r\n");
      out.write("\t\t");
if(!"Post".equals(type)) {
      out.write("\r\n");
      out.write("\t\t<td style=\"white-space: nowrap\">\r\n");
      out.write("\t\t<!-- +v2.0 add 2013-07-25 suqiang ITMS00047 strat--> \t\r\n");
      out.write("\t\t\t<select id=\"forward_userid\" name=\"forward_userid\">\r\n");
      out.write("\t\t\t\t<option value=\"\">-请选择-</option>\r\n");
      out.write("\t\t\t\t");

				for(int i=0;i<userList.size();i++){
				Map usermap = (Map) userList.get(i);
				 
      out.write("\r\n");
      out.write("\t\t\t\t<option value=\"");
      out.print(usermap.get("user_id") );
      out.write('"');
      out.write('>');
      out.print(usermap.get("user_name") );
      out.write("</option>\r\n");
      out.write("\t\t\t\t");
} 
      out.write("\r\n");
      out.write("\t\t\t</select>\r\n");
      out.write("\t\t\t<input type=\"button\" name=\"user_btn\" value=\"..\" ");
      out.print(style );
      out.write(' ');
      out.print(disabled );
      out.write(' ');
if("Post".equals(type)){ 
      out.write("disabled=\"disabled\"");
} 
      out.write(" onclick=\"alertUserWindow(500,400)\"/>\r\n");
      out.write("\t\t<!-- +v2.0 add 2013-07-25 suqiang ITMS00047 end --> \t\r\n");
      out.write("\t\t\t<input type=\"button\" name=\"forward\" value=\"指派\" ");
      out.print(style );
      out.write(' ');
      out.print(disabled );
      out.write(" onclick=\"forwardTask()\" ");
if("Post".equals(type)){ 
      out.write("disabled=\"disabled\"");
} 
      out.write("/>\r\n");
      out.write("\t\t\t<input type=\"button\" name=\"back\" value=\"退回\"  ");
      out.print(style );
      out.write(' ');
      out.print(disabled );
      out.write(" onclick=\"backTask()\" ");
if("Post".equals(type)){ 
      out.write("disabled=\"disabled\"");
} 
      out.write("/>\r\n");
      out.write("\t\t\t<input type=\"button\" name=\"view\" value=\"查看\" ");
      out.print(style );
      out.write(' ');
      out.print(disabled );
      out.write(" onclick=\"viewTask()\" ");
if("Post".equals(type)){ 
      out.write("disabled=\"disabled\"");
} 
      out.write("/>\r\n");
      out.write("\t\t\t<input type=\"button\" name=\"close\" value=\"关闭窗口\" onclick=\"closewindow()\"/>\r\n");
      out.write("\t\t\t<input type=\"button\" name=\"mail\" value=\"邮件\" ");
if("Post".equals(type)){ 
      out.write("disabled=\"disabled\"");
} 
      out.write(" onclick=\"CCForm()\"/>\r\n");
      out.write("\t\t</td>\r\n");
      out.write("\t\t");
}else{ 
      out.write("\r\n");
      out.write("\t\t<td>&nbsp;</td>\r\n");
      out.write("\t\t");
} 
      out.write("\r\n");
      out.write("\t</tr>\t\r\n");
      out.write("\t<tr>\r\n");
      out.write("\t\t<td>备注(<a href='#' onclick=\"window.open('");
      out.print(path );
      out.write("/workflow/view_task_notes.jsp?taskid=");
      out.print(taskid );
      out.write("','查看沟通记录', 'height=800, width=1600, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no')\" >明细</a>):");
      out.print(comments );
      out.write("</td>\r\n");
      out.write("\t\t<td>\r\n");
      out.write("\t\t\t<textarea rows=\"1\" cols=\"70\" name=\"Comments\"></textarea>\r\n");
      out.write("\t\t</td>\r\n");
      out.write("\t\t");
if(!"Post".equals(type)) {
      out.write("\r\n");
      out.write("\t\t<td>\r\n");
      out.write("\t\t\t提交者：<font color='blue'>");
      out.print(StringUtil.getNulToBlank(map.get("user_name")) );
      out.write("</font></br>提交日期：<font color='blue'>");
      out.print(StringUtil.getNulToBlank(map.get("posttime")) );
      out.write("</font></br>TaskID：<font color='blue'>");
      out.print(StringUtil.getNulToBlank(taskid) );
      out.write("</font></br>\r\n");
      out.write("\t\t</td>\r\n");
      out.write("\t\t");
} else{
      out.write("\r\n");
      out.write("\t\t<td>&nbsp;</td>\r\n");
      out.write("\t\t");
} 
      out.write("\r\n");
      out.write("\t</tr>\r\n");
      out.write("</table>\r\n");
      out.write("</form>\r\n");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${msg}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("\r\n");
      out.write("</body>\r\n");
      out.write("</html>\r\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
