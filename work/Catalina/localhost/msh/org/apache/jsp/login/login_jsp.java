/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.75
 * Generated at: 2017-11-01 09:27:51 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.login;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import com.llc.plat.global.GlobalNames;

public final class login_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.HashMap<java.lang.String,java.lang.Long>(1);
    _jspx_dependants.put("/WEB-INF/struts-html.tld", Long.valueOf(1509429872893L));
  }

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;


response.setHeader("Pragma","No-cache"); 
response.setHeader("Cache-Control","no-cache"); 
response.setDateHeader("Expires", -10);

      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("<title>MSH后台管理系统</title>\r\n");
      out.write("<meta name=\"keywords\" content=\"login\" http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\r\n");
      out.write("<link href=\"");
      out.print(GlobalNames.WEB_APP );
      out.write("/css/admin2.css\" rel=\"stylesheet\" type=\"text/css\">\r\n");
      out.write("<script language=\"javascript\" src=\"");
      out.print(GlobalNames.WEB_APP );
      out.write("/js/Globals.js\"></script>\r\n");
      out.write("<script Language=\"JavaScript\" src=\"");
      out.print(GlobalNames.WEB_APP );
      out.write("/js/md5.js\"></script>\r\n");
      out.write("<script language=javascript>\r\n");
      out.write("<!--\r\n");
      out.write("function openwindow( url, winName, width, height) \r\n");
      out.write("{\r\n");
      out.write("xposition=0; yposition=0;\r\n");
      out.write("if ((parseInt(navigator.appVersion) >= 4 ))\r\n");
      out.write("{\r\n");
      out.write("xposition = (screen.width - width) / 2;\r\n");
      out.write("yposition = (screen.height - height) / 2;\r\n");
      out.write("}\r\n");
      out.write("theproperty= \"width=\" + width + \",\" \r\n");
      out.write("+ \"height=\" + height + \",\" \r\n");
      out.write("+ \"location=0,\" \r\n");
      out.write("+ \"menubar=0,\"\r\n");
      out.write("+ \"resizable=1,\"\r\n");
      out.write("+ \"scrollbars=1,\"\r\n");
      out.write("+ \"status=0,\" \r\n");
      out.write("+ \"titlebar=0,\"\r\n");
      out.write("+ \"toolbar=0,\"\r\n");
      out.write("+ \"hotkeys=0,\"\r\n");
      out.write("+ \"screenx=\" + xposition + \",\" //仅适用于Netscape\r\n");
      out.write("+ \"screeny=\" + yposition + \",\" //仅适用于Netscape\r\n");
      out.write("+ \"left=\" + xposition + \",\" //IE\r\n");
      out.write("+ \"top=\" + yposition; //IE \r\n");
      out.write("window.open( url,winName,theproperty );\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("function checkfrom(){\r\n");
      out.write("\tvar user_name = document.getElementById(\"user_name\");\r\n");
      out.write("\tvar ruserpass = document.getElementById(\"ruserpass\");\r\n");
      out.write("\tif(user_name.value==\"\"||ruserpass.value==\"\"){\r\n");
      out.write("\t\talert(\"用户名或密码不能为空，请确认！\");\r\n");
      out.write("\t\tdocument.getElementById(\"user_name\").focus();\r\n");
      out.write("\t\treturn false;\r\n");
      out.write("\t}\r\n");
      out.write("\tvar appname = \"");
      out.print(GlobalNames.WEB_APP.substring(1));
      out.write("\";\r\n");
      out.write("\tvar password = getCookieValue(appname+user_name.value+\"_passWord\"); //\r\n");
      out.write("\t//alert(ruserpass.value);\r\n");
      out.write("\t//alert(password);\r\n");
      out.write("\tif ((password != \"\") && (password != \"null\") && (password != null)) {\r\n");
      out.write("\t\tif(ruserpass.value!=password){\r\n");
      out.write("\t\t\tdocument.getElementById(\"user_pass\").value = hex_md5(document.getElementById(\"ruserpass\").value);\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}else{\r\n");
      out.write("\t\t//document.logonForm.user_pass.value = hex_md5(document.logonForm.user_pass.value);\r\n");
      out.write("\t\tdocument.getElementById(\"user_pass\").value = hex_md5(document.getElementById(\"ruserpass\").value);\r\n");
      out.write("\t}\r\n");
      out.write("\treturn true;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("/**\r\n");
      out.write(" * 根据cookie名称获得其相应的cookie值\r\n");
      out.write(" * cookie保存时有两种格式，cookieName=cookieValue; 和cookieName;\r\n");
      out.write(" * @param cookieName cookie名称\r\n");
      out.write(" * @return 根据cookie名称获得其相应的cookie值，如果cookie名称不存在，则返回null\r\n");
      out.write(" */\r\n");
      out.write("function getCookieValue(cookieName) {\r\n");
      out.write("\tvar cookies = document.cookie; // 所有cookie字符串\r\n");
      out.write("\tcookies = cookies + \";\";\r\n");
      out.write("\tif (cookies.indexOf(cookieName) != -1) { // 存在相应的cookie\r\n");
      out.write("\t\tvar start = cookies.indexOf(cookieName + \"=\") + (cookieName+ \"=\").length; // cookie值开始位置\r\n");
      out.write("\t\tif (start == -1) {\r\n");
      out.write("\t\t\tstart = cookies.indexOf(cookieName) + cookieName.length;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tvar end = cookies.indexOf(\";\", start); // cookie值结束位置\t\t\r\n");
      out.write("\t\t//return cookies.substring(start, end);\r\n");
      out.write("\t\t return readCnCookie(cookieName);      \r\n");
      out.write("\t} \r\n");
      out.write("\telse {\r\n");
      out.write("\t\treturn null;\r\n");
      out.write("\t}\t\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("function readCnCookie(name){ //中文cookie \r\n");
      out.write("var strReturn = null; \r\n");
      out.write("var tmp,reg=new RegExp(\"(^| )\"+name+\"=\\\"*([^;|^\\\"]*)(|;|$)\",\"gi\"); \r\n");
      out.write("if(tmp=reg.exec(document.cookie))strReturn=decodeURIComponent(tmp[2]); \r\n");
      out.write("return strReturn; \r\n");
      out.write("}\r\n");
      out.write("//-->\r\n");
      out.write("</script>\r\n");
      out.write("</head>\r\n");
  
	String errorMsg = "";
	if (request.getAttribute("errorMsg")!=null){
		errorMsg = (String)request.getAttribute("errorMsg");
	}

      out.write("\r\n");
      out.write("<body leftmargin=\"0\" topmargin=\"0\" onload=\"page_init()\">\r\n");
      out.write("<table width=\"100%\" height=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\r\n");
      out.write("  <tr>\r\n");
      out.write("    <td><table width=\"560\" border=\"0\" align=\"center\" cellpadding=\"0\" cellspacing=\"0\">\r\n");
      out.write("        <tr> \r\n");
      out.write("          <td><img src=\"images/Admin2_Login_r2_c2.png\" width=\"560\" height=\"95\"></td>\r\n");
      out.write("        </tr>\r\n");
      out.write("        <tr> \r\n");
      out.write("          <td height=\"105\" colspan=\"2\" background=\"images/Admin2_Login_r3_c2.jpg\"> \r\n");
      out.write("            <table width=\"260\" border=\"0\" align=\"center\" cellpadding=\"0\" cellspacing=\"0\">\r\n");
      out.write("              <form name=\"loginForm\" method=\"post\" action=\"");
      out.print(GlobalNames.WEB_APP);
      out.write("/loginAction.do?method=userLogin\">\r\n");
      out.write("              <input name=\"user_pass\" id=\"user_pass\" type=\"hidden\" value=\"\"/>\r\n");
      out.write("                <tr> \r\n");
      out.write("                  <td width=\"56\" height=\"35\">用户名：</td>\r\n");
      out.write("                  <td width=\"141\" height=\"35\"><input id=\"user_name\" name=\"user_name\" type=\"text\" class=\"INPUT_LOGIN\"></td>\r\n");
      out.write("                  <td width=\"63\" rowspan=\"2\"><input type=\"image\" src=\"images/Admin2_Login_r5_c4.jpg\" width=\"61\" height=\"50\" border=\"0\" onClick=\"javascript:return(checkfrom());\"></td>\r\n");
      out.write("                </tr>\r\n");
      out.write("                <tr> \r\n");
      out.write("                  <td height=\"35\">密　码：</td>\r\n");
      out.write("                  <td height=\"35\"><input id=\"ruserpass\" name=\"ruserpass\" type=\"password\" class=\"INPUT_LOGIN\"><font color=\"red\">");
      out.print(errorMsg);
      out.write("</font></td>\r\n");
      out.write("                </tr>\r\n");
      out.write("                <tr> \r\n");
      out.write("                  <td height=\"35\">&nbsp;</td>\r\n");
      out.write("                  <td height=\"35\"><input id=\"isrpswd\" name=\"isrpswd\" value=\"1\" type=\"checkbox\" id=\"isrpswd\">记住密码</td>\r\n");
      out.write("                </tr>\r\n");
      out.write("              </form>\r\n");
      out.write("            </table></td>\r\n");
      out.write("        </tr>\r\n");
      out.write("        <tr>\r\n");
      out.write("          <td height=\"30\" colspan=\"2\" background=\"images/Admin2_Login_r3_c2.jpg\"><div align=\"center\">最佳浏览模式1366×768分辨率</div></td>\r\n");
      out.write("        </tr>\r\n");
      out.write("        <tr> \r\n");
      out.write("          <td colspan=\"2\"><img src=\"images/Admin2_Login_r7_c2.jpg\" width=\"560\" height=\"18\"></td>\r\n");
      out.write("        </tr>\r\n");
      out.write("      </table></td>\r\n");
      out.write("  </tr>\r\n");
      out.write("</table>\r\n");
      out.write("</body>\r\n");
      out.write("</html>\r\n");
      out.write("<script language=javascript>\r\n");
      out.write("function page_init(){\r\n");
      out.write("\t//获取Cookie\r\n");
      out.write("\tvar appname = \"");
      out.print(GlobalNames.WEB_APP.substring(1));
      out.write("\";\r\n");
      out.write("\tvar loginName = getCookieValue(appname+\"username\"); // 用户名\r\n");
      out.write("\tif ((loginName != \"\") && (loginName != \"null\") && (loginName != null)) {\r\n");
      out.write("\t\tdocument.getElementById(\"user_name\").value=loginName;\r\n");
      out.write("\t\t//密码\r\n");
      out.write("\t\tvar password = getCookieValue(appname+loginName+\"_passWord\"); // \r\n");
      out.write("\t\tvar pw = getCookieValue(appname+loginName+\"_passWord_pw\"); // \r\n");
      out.write("\t\tif ((password != \"\") && (password != \"null\") && (password != null)&&(pw != \"\") && (pw != \"null\") && (pw != null)){\r\n");
      out.write("\t\t\tdocument.getElementById(\"ruserpass\").value=password;\r\n");
      out.write("\t\t\tdocument.getElementById(\"user_pass\").value=pw;\r\n");
      out.write("\t\t\tdocument.getElementById(\"isrpswd\").checked = true;\r\n");
      out.write("\t\t}else{\r\n");
      out.write("\t\t\tdocument.getElementById(\"ruserpass\").value=\"\";\r\n");
      out.write("\t\t\tdocument.getElementById(\"user_pass\").value=\"\";\r\n");
      out.write("\t\t\tdocument.getElementById(\"isrpswd\").checked = false;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}else{\r\n");
      out.write("\t\tdocument.getElementById(\"user_name\").value=\"\";\r\n");
      out.write("\t\tdocument.getElementById(\"ruserpass\").value=\"\";\r\n");
      out.write("\t\tdocument.getElementById(\"user_pass\").value=\"\";\r\n");
      out.write("\t\tdocument.getElementById(\"isrpswd\").checked = false;\r\n");
      out.write("\t}\r\n");
      out.write("\tdocument.getElementById(\"user_name\").focus();\r\n");
      out.write("}\r\n");
      out.write("</script>\r\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
